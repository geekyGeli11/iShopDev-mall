# é—¨åº—åœ°å€APIæ¥å£æ–‡æ¡£

## æ¦‚è¿°
é—¨åº—åœ°å€ç®¡ç†æ¥å£æ”¯æŒç»çº¬åº¦å®šä½å’Œlogoå±•ç¤ºåŠŸèƒ½ï¼Œæä¾›å®Œæ•´çš„é—¨åº—ä¿¡æ¯ç®¡ç†èƒ½åŠ›ã€‚

## æ•°æ®ç»“æ„

### OmsStoreAddress é—¨åº—åœ°å€å¯¹è±¡
```json
{
  "id": "é—¨åº—ID",
  "addressName": "é—¨åº—åç§°",
  "name": "è”ç³»äºº",
  "phone": "ç”µè¯å·ç ",
  "province": "çœä»½",
  "city": "åŸå¸‚",
  "region": "åŒºåŸŸ",
  "detailAddress": "è¯¦ç»†åœ°å€",
  "businessHours": "è¥ä¸šæ—¶é—´",
  "isDefault": "æ˜¯å¦é»˜è®¤é—¨åº—",
  "logo": "é—¨åº—logoå›¾ç‰‡URL",
  "longitude": "ç»åº¦",
  "latitude": "çº¬åº¦",
  "createTime": "åˆ›å»ºæ—¶é—´",
  "updateTime": "æ›´æ–°æ—¶é—´"
}
```

## ç®¡ç†ç«¯æ¥å£ (mall-admin)

### 1. è·å–é—¨åº—åœ°å€åˆ—è¡¨
- **URL**: `GET /storeAddress/list`
- **å‚æ•°**: 
  - `addressName` (å¯é€‰): é—¨åº—åç§°
  - `phone` (å¯é€‰): ç”µè¯å·ç 
  - `isDefault` (å¯é€‰): æ˜¯å¦é»˜è®¤
  - `pageNum` (å¯é€‰): é¡µç ï¼Œé»˜è®¤1
  - `pageSize` (å¯é€‰): æ¯é¡µå¤§å°ï¼Œé»˜è®¤10

### 2. åˆ›å»ºé—¨åº—åœ°å€
- **URL**: `POST /storeAddress/create`
- **è¯·æ±‚ä½“**: OmsStoreAddresså¯¹è±¡
- **æ–°å¢å­—æ®µ**:
  - `logo`: é—¨åº—logoå›¾ç‰‡URL
  - `longitude`: ç»åº¦ (BigDecimal)
  - `latitude`: çº¬åº¦ (BigDecimal)

### 3. æ›´æ–°é—¨åº—åœ°å€
- **URL**: `POST /storeAddress/update/{id}`
- **è¯·æ±‚ä½“**: OmsStoreAddresså¯¹è±¡

### 4. åˆ é™¤é—¨åº—åœ°å€
- **URL**: `POST /storeAddress/delete/{id}`

### 5. è·å–é—¨åº—åœ°å€è¯¦æƒ…
- **URL**: `GET /storeAddress/{id}`

## å°ç¨‹åºç«¯æ¥å£ (mall-portal)

### 1. è·å–æ‰€æœ‰é—¨åº—åœ°å€
- **URL**: `GET /storeAddress/list`
- **è¯´æ˜**: è¿”å›æ‰€æœ‰é—¨åº—åœ°å€ï¼ŒæŒ‰é»˜è®¤çŠ¶æ€å’Œåˆ›å»ºæ—¶é—´æ’åº

### 2. è·å–é—¨åº—åœ°å€è¯¦æƒ…
- **URL**: `GET /storeAddress/{id}`
- **å‚æ•°**: 
  - `id`: é—¨åº—ID

### 3. æ ¹æ®è·ç¦»æŸ¥è¯¢é™„è¿‘é—¨åº— ğŸ†•
- **URL**: `GET /storeAddress/nearby`
- **å‚æ•°**: 
  - `longitude`: ç”¨æˆ·å½“å‰ç»åº¦
  - `latitude`: ç”¨æˆ·å½“å‰çº¬åº¦
  - `radius`: æœç´¢åŠå¾„ï¼ˆå…¬é‡Œï¼‰ï¼Œé»˜è®¤10
- **è¯´æ˜**: è¿”å›æŒ‰è·ç¦»æ’åºçš„é™„è¿‘é—¨åº—åˆ—è¡¨

### 4. è·å–é»˜è®¤é—¨åº—åœ°å€
- **URL**: `GET /storeAddress/default`
- **è¯´æ˜**: è¿”å›é»˜è®¤é—¨åº—åœ°å€

### 5. æ ¹æ®åŸå¸‚æŸ¥è¯¢é—¨åº—
- **URL**: `GET /storeAddress/by-city`
- **å‚æ•°**: 
  - `city`: åŸå¸‚åç§°
- **è¯´æ˜**: è¿”å›æŒ‡å®šåŸå¸‚çš„é—¨åº—åˆ—è¡¨

## æ–°å¢åŠŸèƒ½è¯´æ˜

### 1. ç»çº¬åº¦å®šä½åŠŸèƒ½
- æ”¯æŒç²¾ç¡®çš„åœ°ç†ä½ç½®å®šä½
- ä½¿ç”¨BigDecimalç±»å‹å­˜å‚¨ï¼Œç²¾åº¦ä¸ºå°æ•°ç‚¹å7ä½
- æ”¯æŒåŸºäºè·ç¦»çš„é—¨åº—æœç´¢å’Œæ’åº

### 2. é—¨åº—LogoåŠŸèƒ½
- æ”¯æŒé—¨åº—logoå›¾ç‰‡ä¸Šä¼ å’Œå±•ç¤º
- å›¾ç‰‡URLå­˜å‚¨åœ¨logoå­—æ®µä¸­
- å‰ç«¯å¯ç›´æ¥å±•ç¤ºé—¨åº—å“ç‰Œå½¢è±¡

### 3. è·ç¦»è®¡ç®—ç®—æ³•
- ä½¿ç”¨Haversineå…¬å¼è®¡ç®—ä¸¤ç‚¹é—´è·ç¦»
- æ”¯æŒå…¬é‡Œä¸ºå•ä½çš„è·ç¦»è®¡ç®—
- è¿”å›ç»“æœæŒ‰è·ç¦»ä»è¿‘åˆ°è¿œæ’åº

## ç¤ºä¾‹è¯·æ±‚

### åˆ›å»ºé—¨åº—ï¼ˆåŒ…å«æ–°å­—æ®µï¼‰
```json
POST /storeAddress/create
{
  "addressName": "åŒ—äº¬æœé˜³é—¨åº—",
  "name": "å¼ ä¸‰",
  "phone": "13800138000",
  "province": "åŒ—äº¬å¸‚",
  "city": "åŒ—äº¬å¸‚",
  "region": "æœé˜³åŒº",
  "detailAddress": "å»ºå›½é—¨å¤–å¤§è¡—100å·",
  "businessHours": "09:00-21:00",
  "isDefault": false,
  "logo": "https://example.com/logo.png",
  "longitude": 116.434307,
  "latitude": 39.910889
}
```

### æŸ¥è¯¢é™„è¿‘é—¨åº—
```json
GET /storeAddress/nearby?longitude=116.434307&latitude=39.910889&radius=5

Response:
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "id": 1,
      "addressName": "åŒ—äº¬æœé˜³é—¨åº—",
      "logo": "https://example.com/logo.png",
      "longitude": 116.434307,
      "latitude": 39.910889,
      "distance": 0.5  // è·ç¦»ï¼ˆå…¬é‡Œï¼‰
    }
  ]
}
```

## æ³¨æ„äº‹é¡¹

1. **æ•°æ®ç±»å‹**: ç»çº¬åº¦ä½¿ç”¨BigDecimalç±»å‹ï¼Œç¡®ä¿ç²¾åº¦
2. **è·ç¦»è®¡ç®—**: åœ°çƒåŠå¾„æŒ‰6371å…¬é‡Œè®¡ç®—
3. **åæ ‡èŒƒå›´**: ç»åº¦èŒƒå›´[-180, 180]ï¼Œçº¬åº¦èŒƒå›´[-90, 90]
4. **å›¾ç‰‡ä¸Šä¼ **: Logoéœ€è¦å…ˆé€šè¿‡å›¾ç‰‡ä¸Šä¼ æ¥å£è·å–URL
5. **é»˜è®¤é—¨åº—**: ç³»ç»Ÿåº”è‡³å°‘ä¿æŒä¸€ä¸ªé»˜è®¤é—¨åº— 