<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®ç±»å‹æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .test-section h3 {
            color: #555;
            margin-top: 0;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #666;
        }
        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .result {
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .log {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            color: #495057;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ•°æ®ç±»å‹æµ‹è¯•å·¥å…·</h1>
        
        <!-- æ‰‹æœºå·ç™»å½•å‚æ•°æµ‹è¯• -->
        <div class="test-section">
            <h3>1. æ‰‹æœºå·ç™»å½•å‚æ•°æµ‹è¯•</h3>
            <div class="input-group">
                <label>æ‰‹æœºå·:</label>
                <input type="tel" id="phoneInput" placeholder="15521006217" maxlength="11">
            </div>
            <div class="input-group">
                <label>éªŒè¯ç :</label>
                <input type="text" id="codeInput" placeholder="123456" maxlength="6">
            </div>
            <button onclick="testMemberLogin()">æµ‹è¯•æ‰‹æœºå·ç™»å½•</button>
            <div id="memberResult" class="result log" style="display: none;"></div>
        </div>

        <!-- JSONåºåˆ—åŒ–æµ‹è¯• -->
        <div class="test-section">
            <h3>2. JSONåºåˆ—åŒ–æµ‹è¯•</h3>
            <div class="input-group">
                <label>æ‰‹æœºå·:</label>
                <input type="tel" id="phoneInput2" placeholder="15521006217" maxlength="11">
            </div>
            <div class="input-group">
                <label>éªŒè¯ç :</label>
                <input type="text" id="codeInput2" placeholder="123456" maxlength="6">
            </div>
            <button onclick="testJSONSerialization()">æµ‹è¯•JSONåºåˆ—åŒ–</button>
            <div id="jsonResult" class="result log" style="display: none;"></div>
        </div>

        <!-- ç±»å‹è½¬æ¢æµ‹è¯• -->
        <div class="test-section">
            <h3>3. ç±»å‹è½¬æ¢æµ‹è¯•</h3>
            <div class="input-group">
                <label>æµ‹è¯•å€¼:</label>
                <input type="text" id="testValue" placeholder="123456">
            </div>
            <button onclick="testTypeConversion()">æµ‹è¯•ç±»å‹è½¬æ¢</button>
            <div id="typeResult" class="result log" style="display: none;"></div>
        </div>
    </div>

    <script>
        let currentLogElement = null;

        function log(message) {
            console.log(message);
            if (currentLogElement) {
                currentLogElement.textContent += message + '\n';
                currentLogElement.scrollTop = currentLogElement.scrollHeight;
            }
        }

        function clearLog(element) {
            element.textContent = '';
            element.style.display = 'block';
            currentLogElement = element;
        }

        function testMemberLogin() {
            const phone = document.getElementById('phoneInput').value;
            const code = document.getElementById('codeInput').value;
            const resultDiv = document.getElementById('memberResult');
            
            clearLog(resultDiv);
            
            if (!phone.trim() || !code.trim()) {
                log('âŒ è¯·è¾“å…¥æ‰‹æœºå·å’ŒéªŒè¯ç ');
                return;
            }
            
            log('ğŸ” åŸå§‹è¾“å…¥:');
            log('æ‰‹æœºå·: ' + phone + ' (ç±»å‹: ' + typeof phone + ')');
            log('éªŒè¯ç : ' + code + ' (ç±»å‹: ' + typeof code + ')');
            
            // æ¨¡æ‹Ÿå‰ç«¯è¡¨å•æ•°æ®
            const loginForm = {
                phone: phone,
                verifyCode: code
            };
            
            log('\nğŸ“ è¡¨å•æ•°æ®:');
            log('loginForm.phone: ' + loginForm.phone + ' (ç±»å‹: ' + typeof loginForm.phone + ')');
            log('loginForm.verifyCode: ' + loginForm.verifyCode + ' (ç±»å‹: ' + typeof loginForm.verifyCode + ')');
            
            // æ¨¡æ‹Ÿæ„å»ºç™»å½•å‚æ•°
            const loginParams = {
                telephone: loginForm.phone,
                verifyCode: loginForm.verifyCode,
            };
            
            log('\nğŸ“¤ ç™»å½•å‚æ•°:');
            log('telephone: ' + loginParams.telephone + ' (ç±»å‹: ' + typeof loginParams.telephone + ')');
            log('verifyCode: ' + loginParams.verifyCode + ' (ç±»å‹: ' + typeof loginParams.verifyCode + ')');
            
            // æ¨¡æ‹ŸJSONåºåˆ—åŒ–
            const serialized = JSON.stringify(loginParams);
            log('\nğŸ”„ JSONåºåˆ—åŒ–:');
            log('åºåˆ—åŒ–ç»“æœ: ' + serialized);
            log('åºåˆ—åŒ–é•¿åº¦: ' + serialized.length);
            
            // æ¨¡æ‹Ÿååºåˆ—åŒ–
            try {
                const deserialized = JSON.parse(serialized);
                log('\nğŸ“¥ ååºåˆ—åŒ–:');
                log('telephone: ' + deserialized.telephone + ' (ç±»å‹: ' + typeof deserialized.telephone + ')');
                log('verifyCode: ' + deserialized.verifyCode + ' (ç±»å‹: ' + typeof deserialized.verifyCode + ')');
                
                // æ¨¡æ‹Ÿåç«¯éªŒè¯ç å¤„ç†
                log('\nğŸ” æ¨¡æ‹Ÿåç«¯å¤„ç†:');
                const verifyCode = deserialized.verifyCode;
                log('åŸå§‹éªŒè¯ç : ' + verifyCode + ' (ç±»å‹: ' + typeof verifyCode + ')');
                
                // æ£€æŸ¥æ˜¯å¦ä¸ºæ•°å­—å­—ç¬¦ä¸²
                const isNumericString = /^\d{1,6}$/.test(verifyCode);
                log('æ˜¯å¦ä¸ºæ•°å­—å­—ç¬¦ä¸²: ' + isNumericString);
                
                if (isNumericString) {
                    try {
                        const parsed = parseInt(verifyCode);
                        log('parseIntç»“æœ: ' + parsed + ' (ç±»å‹: ' + typeof parsed + ')');
                        
                        const formatted = String.prototype.padStart.call(parsed.toString(), 6, '0');
                        log('æ ¼å¼åŒ–ç»“æœ: ' + formatted + ' (ç±»å‹: ' + typeof formatted + ')');
                    } catch (error) {
                        log('âŒ parseIntå¤±è´¥: ' + error.message);
                    }
                } else {
                    log('âŒ éªŒè¯ç æ ¼å¼ä¸æ­£ç¡®');
                }
                
            } catch (error) {
                log('âŒ ååºåˆ—åŒ–å¤±è´¥: ' + error.message);
            }
        }

        function testJSONSerialization() {
            const phone = document.getElementById('phoneInput2').value;
            const code = document.getElementById('codeInput2').value;
            const resultDiv = document.getElementById('jsonResult');
            
            clearLog(resultDiv);
            
            if (!phone.trim() || !code.trim()) {
                log('âŒ è¯·è¾“å…¥æ‰‹æœºå·å’ŒéªŒè¯ç ');
                return;
            }
            
            // æµ‹è¯•ä¸åŒçš„æ•°æ®ç±»å‹
            const testCases = [
                { name: 'å­—ç¬¦ä¸²éªŒè¯ç ', data: { telephone: phone, verifyCode: code } },
                { name: 'æ•°å­—éªŒè¯ç ', data: { telephone: phone, verifyCode: parseInt(code) } },
                { name: 'æ··åˆç±»å‹', data: { telephone: parseInt(phone), verifyCode: code } },
            ];
            
            testCases.forEach((testCase, index) => {
                log(`\nğŸ§ª æµ‹è¯•ç”¨ä¾‹ ${index + 1}: ${testCase.name}`);
                log('åŸå§‹æ•°æ®: ' + JSON.stringify(testCase.data));
                log('telephone ç±»å‹: ' + typeof testCase.data.telephone);
                log('verifyCode ç±»å‹: ' + typeof testCase.data.verifyCode);
                
                const serialized = JSON.stringify(testCase.data);
                log('åºåˆ—åŒ–: ' + serialized);
                
                try {
                    const deserialized = JSON.parse(serialized);
                    log('ååºåˆ—åŒ– telephone ç±»å‹: ' + typeof deserialized.telephone);
                    log('ååºåˆ—åŒ– verifyCode ç±»å‹: ' + typeof deserialized.verifyCode);
                } catch (error) {
                    log('âŒ ååºåˆ—åŒ–å¤±è´¥: ' + error.message);
                }
            });
        }

        function testTypeConversion() {
            const value = document.getElementById('testValue').value;
            const resultDiv = document.getElementById('typeResult');
            
            clearLog(resultDiv);
            
            if (!value.trim()) {
                log('âŒ è¯·è¾“å…¥æµ‹è¯•å€¼');
                return;
            }
            
            log('ğŸ” åŸå§‹å€¼: ' + value + ' (ç±»å‹: ' + typeof value + ')');
            
            // æµ‹è¯•å„ç§è½¬æ¢
            log('\nğŸ”„ ç±»å‹è½¬æ¢æµ‹è¯•:');
            
            try {
                const asNumber = Number(value);
                log('Number(): ' + asNumber + ' (ç±»å‹: ' + typeof asNumber + ')');
            } catch (error) {
                log('âŒ Number() å¤±è´¥: ' + error.message);
            }
            
            try {
                const asInt = parseInt(value);
                log('parseInt(): ' + asInt + ' (ç±»å‹: ' + typeof asInt + ')');
            } catch (error) {
                log('âŒ parseInt() å¤±è´¥: ' + error.message);
            }
            
            try {
                const asString = String(value);
                log('String(): ' + asString + ' (ç±»å‹: ' + typeof asString + ')');
            } catch (error) {
                log('âŒ String() å¤±è´¥: ' + error.message);
            }
            
            // æµ‹è¯•JSONåºåˆ—åŒ–å¯¹ä¸åŒç±»å‹çš„å¤„ç†
            log('\nğŸ“¦ JSONåºåˆ—åŒ–æµ‹è¯•:');
            const testObj1 = { value: value };  // å­—ç¬¦ä¸²
            const testObj2 = { value: parseInt(value) };  // æ•°å­—
            
            log('å­—ç¬¦ä¸²å¯¹è±¡: ' + JSON.stringify(testObj1));
            log('æ•°å­—å¯¹è±¡: ' + JSON.stringify(testObj2));
            
            // æµ‹è¯•ååºåˆ—åŒ–
            const parsed1 = JSON.parse(JSON.stringify(testObj1));
            const parsed2 = JSON.parse(JSON.stringify(testObj2));
            
            log('ååºåˆ—åŒ–å­—ç¬¦ä¸²: ' + parsed1.value + ' (ç±»å‹: ' + typeof parsed1.value + ')');
            log('ååºåˆ—åŒ–æ•°å­—: ' + parsed2.value + ' (ç±»å‹: ' + typeof parsed2.value + ')');
        }

        // é¡µé¢åŠ è½½æ—¶è®¾ç½®é»˜è®¤å€¼
        window.onload = function() {
            document.getElementById('phoneInput').value = '15521006217';
            document.getElementById('codeInput').value = '123456';
            document.getElementById('phoneInput2').value = '15521006217';
            document.getElementById('codeInput2').value = '123456';
            document.getElementById('testValue').value = '123456';
        };
    </script>
</body>
</html>
