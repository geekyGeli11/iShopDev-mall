# Mallè‡ªåŠ©æ”¶é“¶ç³»ç»Ÿ - APKæ„å»ºä½¿ç”¨è¯´æ˜

## ğŸ“± APKç‰ˆæœ¬è¯´æ˜

### ğŸ› è°ƒè¯•ç‰ˆAPKï¼ˆDebugï¼‰
- **åŒ…å«åŠŸèƒ½**: è°ƒè¯•é¢æ¿ã€è¯¦ç»†æ—¥å¿—ã€æ‰«ç æ¨¡æ‹Ÿå™¨ã€APIè°ƒè¯•æ‹¦æˆªå™¨
- **é€‚ç”¨åœºæ™¯**: å¼€å‘æµ‹è¯•ã€é—®é¢˜æ’æŸ¥ã€åŠŸèƒ½éªŒè¯
- **æ–‡ä»¶ç‰¹ç‚¹**: æ–‡ä»¶è¾ƒå¤§ï¼ŒåŒ…å«è°ƒè¯•ä¿¡æ¯
- **æ€§èƒ½**: ä¸€èˆ¬ï¼ˆåŒ…å«è°ƒè¯•ä»£ç ï¼‰
- **ç‰ˆæœ¬ç®¡ç†**: æ”¯æŒåŠ¨æ€ç‰ˆæœ¬å·è®¾ç½®

### ğŸš€ å‘è¡Œç‰ˆAPKï¼ˆReleaseï¼‰
- **åŒ…å«åŠŸèƒ½**: ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–ç‰ˆæœ¬ï¼Œæ— è°ƒè¯•åŠŸèƒ½
- **é€‚ç”¨åœºæ™¯**: æ­£å¼å‘å¸ƒã€ç”Ÿäº§éƒ¨ç½²ã€æœ€ç»ˆç”¨æˆ·ä½¿ç”¨
- **æ–‡ä»¶ç‰¹ç‚¹**: æ–‡ä»¶è¾ƒå°ï¼Œä»£ç å·²å‹ç¼©æ··æ·†
- **æ€§èƒ½**: æœ€ä½³ï¼ˆç”Ÿäº§ç¯å¢ƒä¼˜åŒ–ï¼‰
- **ç‰ˆæœ¬ç®¡ç†**: è‡ªåŠ¨ä»APKè§£æç‰ˆæœ¬ä¿¡æ¯ï¼Œç¡®ä¿ä¸€è‡´æ€§

## ğŸ”¢ ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ

### ç‰ˆæœ¬ä¿¡æ¯ç»„æˆ
- **versionName**: ç‰ˆæœ¬åç§°ï¼ˆå¦‚ 1.2.0ï¼‰- ç”¨æˆ·å¯è§
- **versionCode**: ç‰ˆæœ¬å·ï¼ˆå¦‚ 1002ï¼‰- ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨ï¼Œå¿…é¡»é€’å¢

### ç‰ˆæœ¬ç®¡ç†å·¥å…·
```bash
# æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬ä¿¡æ¯
scripts\version-manager.bat show

# è®¾ç½®ç‰ˆæœ¬ä¿¡æ¯
scripts\version-manager.bat set 1.2.0 1002

# è‡ªåŠ¨é€’å¢ç‰ˆæœ¬å·
scripts\version-manager.bat auto

# åŒæ­¥package.jsonå’Œbuild.gradleç‰ˆæœ¬
scripts\version-manager.bat sync
```

### ç‰ˆæœ¬ä¸€è‡´æ€§ä¿è¯
- âœ… **APKè§£æ**: åç«¯è‡ªåŠ¨ä»APKæ–‡ä»¶ä¸­è¯»å–çœŸå®ç‰ˆæœ¬ä¿¡æ¯
- âœ… **ç‰ˆæœ¬éªŒè¯**: ä¸Šä¼ æ—¶è‡ªåŠ¨éªŒè¯ç‰ˆæœ¬å·å”¯ä¸€æ€§
- âœ… **åŒæ­¥æœºåˆ¶**: å‰ç«¯APKä¸åç«¯æ•°æ®åº“ç‰ˆæœ¬å®Œå…¨ä¸€è‡´
- âœ… **é˜²é‡å¤æ›´æ–°**: é¿å…æ— é™æ›´æ–°å¾ªç¯é—®é¢˜

## ğŸ—ï¸ æ„å»ºæ–¹æ³•
### æ–¹æ³•1: ä½¿ç”¨å¢å¼ºç‰ˆæ„å»ºè„šæœ¬ï¼ˆæ¨èï¼‰

#### è°ƒè¯•ç‰ˆæ„å»º
```bash
# ä½¿ç”¨é»˜è®¤ç‰ˆæœ¬ä¿¡æ¯
scripts\build-android.bat

# æŒ‡å®šç¯å¢ƒ
scripts\build-android.bat dev

# æŒ‡å®šç‰ˆæœ¬ä¿¡æ¯
scripts\build-android.bat dev 1.2.0 1002

# ä¸åŒç¯å¢ƒæ„å»º
scripts\build-android.bat staging 1.2.0 1002  # é¢„å‘å¸ƒç¯å¢ƒ
scripts\build-android.bat prod 1.2.0 1002     # ç”Ÿäº§ç¯å¢ƒ
```

#### å‘è¡Œç‰ˆæ„å»º
```bash
# ä½¿ç”¨é»˜è®¤ç‰ˆæœ¬ä¿¡æ¯
scripts\build-android-release.bat

# æŒ‡å®šç‰ˆæœ¬ä¿¡æ¯ï¼ˆæ¨èï¼‰
scripts\build-android-release.bat prod 1.2.0 1002

# é¢„å‘å¸ƒç¯å¢ƒ
scripts\build-android-release.bat staging 1.1.1 1001
```

### æ–¹æ³•2: ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†å·¥å…·
```bash
# 1. è®¾ç½®ç‰ˆæœ¬ä¿¡æ¯
scripts\version-manager.bat set 1.2.0 1002

# 2. æ„å»ºAPKï¼ˆä½¿ç”¨å·²è®¾ç½®çš„ç‰ˆæœ¬ï¼‰
scripts\build-android-release.bat prod

# æˆ–è€…è‡ªåŠ¨é€’å¢ç‰ˆæœ¬å·
scripts\version-manager.bat auto
scripts\build-android-release.bat prod
```

### æ–¹æ³•3: ä½¿ç”¨npmè„šæœ¬ï¼ˆå…¼å®¹æ—§ç‰ˆï¼‰
```bash
# æ„å»ºè°ƒè¯•ç‰ˆAPK
npm run android:debug

# æ„å»ºå‘è¡Œç‰ˆAPK
npm run android:release
```

### æ–¹æ³•4: ä½¿ç”¨å¿«é€Ÿå¯åŠ¨è„šæœ¬
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
build-apk.bat
```
ç„¶åæ ¹æ®æç¤ºé€‰æ‹©è¦æ„å»ºçš„ç‰ˆæœ¬ã€‚

### æ–¹æ³•5: åŸå§‹æ„å»ºæ–¹æ³•ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
**å½“æ„å»ºè„šæœ¬å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹åŸå§‹æ–¹æ³•è¿›è¡Œæ„å»º**ï¼š

#### æ­¥éª¤1: æ„å»ºWebåº”ç”¨
```bash
# å¼€å‘ç¯å¢ƒ
npm run build:capacitor:dev

# é¢„å‘å¸ƒç¯å¢ƒ
npm run build:capacitor:staging

# ç”Ÿäº§ç¯å¢ƒ
npm run build:capacitor
```

#### æ­¥éª¤2: åŒæ­¥åˆ°Androidé¡¹ç›®
```bash
npx cap sync android
```

#### æ­¥éª¤3: æ„å»ºAndroid APK
```bash
# è¿›å…¥androidç›®å½•
cd android

# æ„å»ºè°ƒè¯•ç‰ˆAPK
.\gradlew assembleDebug

# æ„å»ºå‘å¸ƒç‰ˆAPKï¼ˆéœ€è¦å¯†é’¥åº“ï¼‰
.\gradlew assembleRelease

# è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ..
```

#### æ­¥éª¤4: æ‰‹åŠ¨è®¾ç½®ç‰ˆæœ¬å·ï¼ˆå¯é€‰ï¼‰
å¦‚æœéœ€è¦è®¾ç½®ç‰¹å®šç‰ˆæœ¬å·ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘ `android/app/build.gradle` æ–‡ä»¶ï¼š
```gradle
defaultConfig {
    applicationId "com.mall.selfcheckout"
    minSdkVersion rootProject.ext.minSdkVersion
    targetSdkVersion rootProject.ext.targetSdkVersion
    versionCode 1002        // ä¿®æ”¹è¿™é‡Œ
    versionName "1.2.0"     // ä¿®æ”¹è¿™é‡Œ
    // ...
}
```

#### æ­¥éª¤5: éªŒè¯æ„å»ºç»“æœ
```bash
# æ£€æŸ¥APKæ–‡ä»¶æ˜¯å¦ç”Ÿæˆ
dir android\app\build\outputs\apk\debug\app-debug.apk
dir android\app\build\outputs\apk\release\app-release.apk

# éªŒè¯èµ„æºè·¯å¾„ï¼ˆç¡®ä¿ä¿®å¤äº†Android 7.1.2ç™½å±é—®é¢˜ï¼‰
findstr "src=\"./assets/" android\app\src\main\assets\public\index.html
```

#### åŸå§‹æ„å»ºæ–¹æ³•çš„ä¼˜åŠ¿
- **ç‹¬ç«‹æ€§å¼º**: ä¸ä¾èµ–æ„å»ºè„šæœ¬ï¼Œç›´æ¥ä½¿ç”¨å®˜æ–¹å·¥å…·
- **é—®é¢˜æ’æŸ¥**: æ›´å®¹æ˜“å®šä½å…·ä½“çš„æ„å»ºé—®é¢˜
- **çµæ´»æ€§é«˜**: å¯ä»¥å•ç‹¬æ‰§è¡Œæ¯ä¸ªæ­¥éª¤
- **å…¼å®¹æ€§å¥½**: é€‚ç”¨äºå„ç§ç¯å¢ƒå’Œé…ç½®

## ğŸ”§ ç¯å¢ƒå‡†å¤‡

### å¿…éœ€ç¯å¢ƒ
1. **Node.js** (ç‰ˆæœ¬ 16+)
2. **Android SDK** å’Œ **Android Studio**
3. **Java JDK** (ç‰ˆæœ¬ 11+)
4. **Gradle** (é€šè¿‡Android Studioå®‰è£…)

### ç¯å¢ƒæ£€æŸ¥
```bash
# æ£€æŸ¥Androidç¯å¢ƒé…ç½®
npm run android:env
```

### é¦–æ¬¡æ„å»ºå‡†å¤‡
1. å®‰è£…é¡¹ç›®ä¾èµ–ï¼š
   ```bash
   npm install
   ```

2. æ£€æŸ¥Androidç¯å¢ƒï¼š
   ```bash
   scripts\check-android-env.bat
   ```

3. åŒæ­¥Capacitoré¡¹ç›®ï¼š
   ```bash
   npm run cap:sync
   ```

## ğŸ“¦ æ„å»ºè¾“å‡º

### æ–‡ä»¶ä½ç½®
- **è°ƒè¯•ç‰ˆ**: `android\app\build\outputs\apk\debug\app-debug.apk`
- **å‘è¡Œç‰ˆ**: `android\app\build\outputs\apk\release\app-release.apk`

### ç‰ˆæœ¬ä¿¡æ¯éªŒè¯
æ„å»ºå®Œæˆåï¼Œå¯ä»¥éªŒè¯APKä¸­çš„ç‰ˆæœ¬ä¿¡æ¯ï¼š
```bash
# æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬ä¿¡æ¯
scripts\version-manager.bat show

# éªŒè¯APKç‰ˆæœ¬ä¿¡æ¯ï¼ˆéœ€è¦aaptå·¥å…·ï¼‰
aapt dump badging android\app\build\outputs\apk\release\app-release.apk | findstr version
```

### æ–‡ä»¶å¤§å°å¯¹æ¯”
- **è°ƒè¯•ç‰ˆ**: çº¦ 15-25 MBï¼ˆåŒ…å«è°ƒè¯•ä¿¡æ¯ï¼‰
- **å‘è¡Œç‰ˆ**: çº¦ 8-15 MBï¼ˆä»£ç å·²å‹ç¼©ï¼‰

### ç‰ˆæœ¬ä¿¡æ¯åŒ…å«
æ¯ä¸ªAPKæ–‡ä»¶éƒ½åŒ…å«ï¼š
- **versionName**: ç”¨æˆ·å¯è§çš„ç‰ˆæœ¬åç§°
- **versionCode**: ç³»ç»Ÿå†…éƒ¨ç‰ˆæœ¬å·ï¼ˆç”¨äºæ›´æ–°æ£€æŸ¥ï¼‰
- **packageName**: com.mall.selfcheckout
- **ç­¾åä¿¡æ¯**: å‘è¡Œç‰ˆåŒ…å«å‘å¸ƒç­¾å

## ğŸ“± å®‰è£…å’Œæµ‹è¯•

### å®‰è£…åˆ°Androidè®¾å¤‡
```bash
# è¿æ¥è®¾å¤‡å¹¶å¯ç”¨USBè°ƒè¯•
adb devices

# å®‰è£…è°ƒè¯•ç‰ˆAPK
adb install android\app\build\outputs\apk\debug\app-debug.apk

# å®‰è£…å‘è¡Œç‰ˆAPK
adb install android\app\build\outputs\apk\release\app-release.apk

# å¼ºåˆ¶é‡æ–°å®‰è£…ï¼ˆè¦†ç›–ç°æœ‰ç‰ˆæœ¬ï¼‰
adb install -r android\app\build\outputs\apk\release\app-release.apk
```

### è°ƒè¯•ç‰ˆAPKæµ‹è¯•è¦ç‚¹
1. **è°ƒè¯•é¢æ¿**: æ£€æŸ¥å·¦ä¸Šè§’æ˜¯å¦æ˜¾ç¤ºè°ƒè¯•é¢æ¿
2. **æ‰«ç åŠŸèƒ½**: æµ‹è¯•å•†å“æ‰«ç ã€ä¼šå‘˜ç æ‰«ç ã€æ”¯ä»˜æ‰«ç 
3. **æ—¥å¿—è®°å½•**: è§‚å¯Ÿè°ƒè¯•é¢æ¿ä¸­çš„æ—¥å¿—è¾“å‡º
4. **å†²çªè§£å†³**: éªŒè¯æ‰«ç å†²çªæ˜¯å¦å·²è§£å†³
5. **æ¨¡æ‹ŸåŠŸèƒ½**: æµ‹è¯•æ‰«ç æ¨¡æ‹Ÿå™¨åŠŸèƒ½
6. **ç‰ˆæœ¬ä¿¡æ¯**: éªŒè¯åº”ç”¨ä¸­æ˜¾ç¤ºçš„ç‰ˆæœ¬å·æ˜¯å¦æ­£ç¡®

### å‘è¡Œç‰ˆAPKæµ‹è¯•è¦ç‚¹
1. **æ€§èƒ½**: æ£€æŸ¥åº”ç”¨å¯åŠ¨é€Ÿåº¦å’Œè¿è¡Œæµç•…åº¦
2. **åŠŸèƒ½**: éªŒè¯æ‰€æœ‰ä¸šåŠ¡åŠŸèƒ½æ­£å¸¸å·¥ä½œ
3. **ç¨³å®šæ€§**: é•¿æ—¶é—´ä½¿ç”¨æµ‹è¯•ç¨³å®šæ€§
4. **å…¼å®¹æ€§**: åœ¨ä¸åŒAndroidç‰ˆæœ¬è®¾å¤‡ä¸Šæµ‹è¯•
5. **ç‰ˆæœ¬æ›´æ–°**: æµ‹è¯•è‡ªåŠ¨æ›´æ–°åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ
6. **ç‰ˆæœ¬æ£€æŸ¥**: éªŒè¯ç‰ˆæœ¬æ£€æŸ¥æ¥å£è¿”å›æ­£ç¡®çš„ç‰ˆæœ¬ä¿¡æ¯

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ„å»ºå¤±è´¥
**å¯èƒ½åŸå› **:
- Androidç¯å¢ƒæœªæ­£ç¡®é…ç½®
- ä¾èµ–åŒ…æœªå®‰è£…
- ç£ç›˜ç©ºé—´ä¸è¶³
- ç‰ˆæœ¬å·æ ¼å¼é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç¯å¢ƒ
scripts\check-android-env.bat

# é‡æ–°å®‰è£…ä¾èµ–
npm install

# æ¸…ç†æ„å»ºç¼“å­˜
cd android
.\gradlew clean
cd ..

# æ£€æŸ¥ç‰ˆæœ¬ä¿¡æ¯
scripts\version-manager.bat show
```

#### 2. å¯†é’¥åº“é—®é¢˜ï¼ˆå‘è¡Œç‰ˆï¼‰
**é”™è¯¯ä¿¡æ¯**: "keystore not found"

**è§£å†³æ–¹æ¡ˆ**:
è„šæœ¬ä¼šè‡ªåŠ¨ç”Ÿæˆå¯†é’¥åº“ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œæ‰‹åŠ¨ç”Ÿæˆï¼š
```bash
keytool -genkeypair -v -keystore android\mall-release-key.keystore -alias mall-key-alias -keyalg RSA -keysize 2048 -validity 10000 -storepass Mall123456 -keypass Mall123456 -dname "CN=Mall"
```

#### 3. Gradleæ„å»ºå¤±è´¥
**å¯èƒ½åŸå› **:
- Gradleç‰ˆæœ¬ä¸å…¼å®¹
- Android SDKç‰ˆæœ¬é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†Gradleç¼“å­˜
cd android
.\gradlew clean

# é‡æ–°åŒæ­¥é¡¹ç›®
cd ..
npm run cap:sync
```

#### 4. è°ƒè¯•é¢æ¿ä¸æ˜¾ç¤º
**å¯èƒ½åŸå› **:
- æ„å»ºæ—¶ä½¿ç”¨äº†ç”Ÿäº§ç¯å¢ƒé…ç½®
- ç¯å¢ƒå˜é‡è®¾ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
ç¡®ä¿ä½¿ç”¨è°ƒè¯•ç‰ˆæ„å»ºè„šæœ¬ï¼š
```bash
scripts\build-android.bat dev
```

#### 5. ç‰ˆæœ¬å·å†²çª
**é”™è¯¯ä¿¡æ¯**: "ç‰ˆæœ¬å·å·²å­˜åœ¨"

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥å½“å‰ç‰ˆæœ¬
scripts\version-manager.bat show

# é€’å¢ç‰ˆæœ¬å·
scripts\version-manager.bat auto

# æˆ–æ‰‹åŠ¨è®¾ç½®æ–°ç‰ˆæœ¬
scripts\version-manager.bat set 1.3.0 1003
```

#### 6. APKç‰ˆæœ¬ä¿¡æ¯ä¸ä¸€è‡´
**é—®é¢˜**: ä¸Šä¼ APKåç‰ˆæœ¬ä¿¡æ¯ä¸é¢„æœŸä¸ç¬¦

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿ä½¿ç”¨äº†æ­£ç¡®çš„ç‰ˆæœ¬å·æ„å»ºAPK
- åç«¯ä¼šè‡ªåŠ¨ä»APKæ–‡ä»¶ä¸­è§£æç‰ˆæœ¬ä¿¡æ¯
- æ£€æŸ¥build.gradleä¸­çš„ç‰ˆæœ¬è®¾ç½®æ˜¯å¦æ­£ç¡®

#### 7. Android 7.1.2 è®¾å¤‡ç™½å±é—®é¢˜
**é—®é¢˜**: APKåœ¨Android 7.1.2è®¾å¤‡ä¸Šå®‰è£…åæ˜¾ç¤ºç™½å±

**æ ¹æœ¬åŸå› **:
1. èµ„æºè·¯å¾„ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆå¦‚ `/assets/index.js`ï¼‰ï¼Œåœ¨è¾ƒè€çš„Android WebViewä¸­æ— æ³•æ­£ç¡®åŠ è½½
2. ES modules å’Œç°ä»£ JavaScript è¯­æ³•åœ¨è€ç‰ˆæœ¬ WebView ä¸­ä¸è¢«æ”¯æŒ
3. Capacitor çš„ HTTPS scheme åœ¨æŸäº›è€è®¾å¤‡ä¸Šæœ‰å…¼å®¹æ€§é—®é¢˜

**å®Œæ•´è§£å†³æ–¹æ¡ˆ**:

**æ­¥éª¤1: æ£€æŸ¥å¹¶ä¿®å¤ Vite é…ç½®**
```bash
# æ£€æŸ¥ vite.config.capacitor.ts é…ç½®
findstr "base: './'," vite.config.capacitor.ts
findstr "@vitejs/plugin-legacy" vite.config.capacitor.ts

# å¦‚æœç¼ºå°‘é…ç½®ï¼Œéœ€è¦æ·»åŠ ï¼š
# 1. base: './'
# 2. @vitejs/plugin-legacy æ’ä»¶
```

**æ­¥éª¤2: æ£€æŸ¥å¹¶ä¿®å¤ Capacitor é…ç½®**
```bash
# æ£€æŸ¥ capacitor.config.ts é…ç½®
findstr "androidScheme.*http" capacitor.config.ts
findstr "useLegacyBridge.*true" capacitor.config.ts
```

**æ­¥éª¤3: å®‰è£…å¿…è¦ä¾èµ–**
```bash
# å¦‚æœç¼ºå°‘ legacy æ’ä»¶
npm install @vitejs/plugin-legacy@5.4.3 terser --save-dev
```

**æ­¥éª¤4: é‡æ–°æ„å»ºåº”ç”¨**
```bash
# å®Œæ•´é‡æ–°æ„å»º
npm run build:capacitor
npx cap sync android
cd android && ./gradlew assembleDebug
```

**éªŒè¯æ–¹æ³•**:
```bash
# 1. æ£€æŸ¥èµ„æºè·¯å¾„
findstr "src=\"./assets/" android\app\src\main\assets\public\index.html

# 2. æ£€æŸ¥ legacy æ”¯æŒ
findstr "nomodule" android\app\src\main\assets\public\index.html

# 3. æ£€æŸ¥ polyfills æ–‡ä»¶
dir android\app\src\main\assets\public\assets\*legacy*
```

**é¢„æœŸç»“æœ**:
- æ„å»ºåçš„ `index.html` åº”è¯¥åŒ…å«ï¼š
  - ç›¸å¯¹è·¯å¾„ï¼š`src="./assets/index.js"`
  - Legacy è„šæœ¬ï¼š`<script nomodule>` æ ‡ç­¾
  - Polyfills å¼•ç”¨ï¼š`polyfills-legacy.js`
- åœ¨ Android 7.1.2 è®¾å¤‡ä¸Šåº”ç”¨èƒ½æ­£å¸¸å¯åŠ¨å’Œè¿è¡Œ

**å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨**:
1. æ£€æŸ¥è®¾å¤‡çš„ WebView ç‰ˆæœ¬æ˜¯å¦è¿‡ä½
2. å°è¯•åœ¨è®¾å¤‡ä¸Šæ›´æ–° Android System WebView
3. è€ƒè™‘ä½¿ç”¨åŸå§‹æ„å»ºæ–¹æ³•è¿›è¡Œæµ‹è¯•

#### 8. æ„å»ºè„šæœ¬ç¼–ç é—®é¢˜
**é—®é¢˜**: æ„å»ºè„šæœ¬æ‰§è¡Œæ—¶å‡ºç°ä¹±ç æˆ–ç¼–ç é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä½¿ç”¨åŸå§‹æ„å»ºæ–¹æ³•æ›¿ä»£è„šæœ¬
# å‚è€ƒ"æ–¹æ³•5: åŸå§‹æ„å»ºæ–¹æ³•"éƒ¨åˆ†

# æˆ–è€…è®¾ç½®æ­£ç¡®çš„ç¼–ç 
chcp 65001
scripts\build-android.bat dev 1.2.0 1002
```

## ğŸ“Š æ„å»ºæ—¶é—´å‚è€ƒ

| æ„å»ºç±»å‹ | é¢„è®¡æ—¶é—´ | ä¸»è¦è€—æ—¶é˜¶æ®µ |
|---------|---------|-------------|
| è°ƒè¯•ç‰ˆ   | 3-8åˆ†é’Ÿ  | Webæ„å»ºã€Androidç¼–è¯‘ |
| å‘è¡Œç‰ˆ   | 5-12åˆ†é’Ÿ | Webæ„å»ºã€ä»£ç æ··æ·†ã€ç­¾å |
| å…¨éƒ¨ç‰ˆæœ¬ | 8-20åˆ†é’Ÿ | ä¸¤æ¬¡å®Œæ•´æ„å»º |

*æ³¨ï¼šæ—¶é—´å–å†³äºç¡¬ä»¶é…ç½®å’Œç½‘ç»œçŠ¶å†µ*

## ğŸš€ éƒ¨ç½²å»ºè®®

### å¼€å‘é˜¶æ®µ
- ä½¿ç”¨è°ƒè¯•ç‰ˆAPKè¿›è¡ŒåŠŸèƒ½å¼€å‘å’Œé—®é¢˜æ’æŸ¥
- åˆ©ç”¨è°ƒè¯•é¢æ¿ç›‘æ§æ‰«ç è¿‡ç¨‹å’ŒAPIè¯·æ±‚
- ä½¿ç”¨æ‰«ç æ¨¡æ‹Ÿå™¨è¿›è¡Œå¿«é€Ÿæµ‹è¯•
- é¢‘ç¹ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†å·¥å…·ç¡®ä¿ç‰ˆæœ¬ä¸€è‡´æ€§

### æµ‹è¯•é˜¶æ®µ
- ä½¿ç”¨è°ƒè¯•ç‰ˆAPKè¿›è¡Œè¯¦ç»†çš„åŠŸèƒ½æµ‹è¯•
- ä½¿ç”¨å‘è¡Œç‰ˆAPKè¿›è¡Œæ€§èƒ½å’Œå…¼å®¹æ€§æµ‹è¯•
- å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬ç¡®ä¿åŠŸèƒ½ä¸€è‡´æ€§
- æµ‹è¯•è‡ªåŠ¨æ›´æ–°åŠŸèƒ½çš„å®Œæ•´æµç¨‹

### ç”Ÿäº§éƒ¨ç½²
- ä»…ä½¿ç”¨å‘è¡Œç‰ˆAPKè¿›è¡Œç”Ÿäº§éƒ¨ç½²
- ç¡®ä¿APKå·²æ­£ç¡®ç­¾å
- åœ¨å¤šç§è®¾å¤‡ä¸Šè¿›è¡Œæœ€ç»ˆéªŒè¯
- ä½¿ç”¨æ­£ç¡®çš„ç‰ˆæœ¬å·è¿›è¡Œå‘å¸ƒ

## ğŸ“‹ ç‰ˆæœ¬å‘å¸ƒæµç¨‹

### æ ‡å‡†å‘å¸ƒæµç¨‹
1. **ç¡®å®šç‰ˆæœ¬å·**:
   ```bash
   scripts\version-manager.bat set 1.2.0 1002
   ```

2. **æ„å»ºå‘è¡Œç‰ˆAPK**:
   ```bash
   scripts\build-android-release.bat prod 1.2.0 1002
   ```

3. **éªŒè¯APK**:
   - å®‰è£…åˆ°æµ‹è¯•è®¾å¤‡
   - éªŒè¯ç‰ˆæœ¬ä¿¡æ¯æ˜¾ç¤ºæ­£ç¡®
   - æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½

4. **ä¸Šä¼ åˆ°åç«¯**:
   - ä½¿ç”¨mall-admin-webä¸Šä¼ APK
   - åç«¯è‡ªåŠ¨è§£æç‰ˆæœ¬ä¿¡æ¯
   - éªŒè¯ç‰ˆæœ¬å·ä¸€è‡´æ€§

5. **å‘å¸ƒæ¿€æ´»**:
   - åœ¨ç®¡ç†åå°æ¿€æ´»æ–°ç‰ˆæœ¬
   - æµ‹è¯•ç‰ˆæœ¬æ£€æŸ¥æ¥å£
   - éªŒè¯è‡ªåŠ¨æ›´æ–°åŠŸèƒ½

### ç‰ˆæœ¬å·è§„åˆ™
- **ä¸»ç‰ˆæœ¬å·**: é‡å¤§åŠŸèƒ½æ›´æ–°æˆ–æ¶æ„å˜æ›´
- **æ¬¡ç‰ˆæœ¬å·**: æ–°åŠŸèƒ½æ·»åŠ æˆ–é‡è¦æ”¹è¿›
- **ä¿®è®¢ç‰ˆæœ¬å·**: é—®é¢˜ä¿®å¤æˆ–å°å¹…ä¼˜åŒ–
- **æ„å»ºå·(versionCode)**: æ¯æ¬¡å‘å¸ƒå¿…é¡»é€’å¢ï¼Œç”¨äºæ›´æ–°æ£€æŸ¥

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨æ„å»ºè¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æ£€æŸ¥æ„å»ºæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
2. è¿è¡Œç¯å¢ƒæ£€æŸ¥è„šæœ¬
3. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
4. è®°å½•å…·ä½“çš„é”™è¯¯ä¿¡æ¯å’Œå¤ç°æ­¥éª¤

## ğŸ”„ è‡ªåŠ¨æ›´æ–°ç³»ç»Ÿ

### æ›´æ–°æœºåˆ¶è¯´æ˜
- **ç‰ˆæœ¬æ£€æŸ¥**: åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æŸ¥æ›´æ–°
- **ç‰ˆæœ¬æ¯”è¾ƒ**: åŸºäºversionCodeè¿›è¡Œç‰ˆæœ¬æ¯”è¾ƒ
- **APKä¸‹è½½**: ç›´æ¥ä»OSSä¸‹è½½APKæ–‡ä»¶
- **ç‰ˆæœ¬éªŒè¯**: ä¸‹è½½åè¿›è¡ŒMD5æ ¡éªŒ
- **è‡ªåŠ¨å®‰è£…**: ä½¿ç”¨ç³»ç»Ÿå®‰è£…å™¨å®‰è£…æ–°ç‰ˆæœ¬

### ç‰ˆæœ¬ä¸€è‡´æ€§ä¿è¯
- âœ… **APKè§£æ**: åç«¯è‡ªåŠ¨ä»APKæ–‡ä»¶è¯»å–ç‰ˆæœ¬ä¿¡æ¯
- âœ… **ç‰ˆæœ¬éªŒè¯**: ä¸Šä¼ æ—¶éªŒè¯ç‰ˆæœ¬å·å”¯ä¸€æ€§
- âœ… **åŒæ­¥æœºåˆ¶**: å‰ç«¯APKä¸åç«¯æ•°æ®åº“ç‰ˆæœ¬å®Œå…¨ä¸€è‡´
- âœ… **é˜²é‡å¤æ›´æ–°**: é¿å…æ— é™æ›´æ–°å¾ªç¯

### æ›´æ–°æµ‹è¯•
1. **æ„å»ºä¸åŒç‰ˆæœ¬çš„APK**:
   ```bash
   # æ„å»ºæ—§ç‰ˆæœ¬ï¼ˆç”¨äºæµ‹è¯•æ›´æ–°ï¼‰
   scripts\build-android-release.bat prod 1.1.0 1001

   # æ„å»ºæ–°ç‰ˆæœ¬ï¼ˆç”¨äºæ›´æ–°ï¼‰
   scripts\build-android-release.bat prod 1.2.0 1002
   ```

2. **æµ‹è¯•æ›´æ–°æµç¨‹**:
   - å®‰è£…æ—§ç‰ˆæœ¬APK
   - ä¸Šä¼ æ–°ç‰ˆæœ¬åˆ°åç«¯
   - å¯åŠ¨åº”ç”¨æµ‹è¯•è‡ªåŠ¨æ›´æ–°

---

**æ³¨æ„**:
- è°ƒè¯•ç‰ˆAPKåŒ…å«è°ƒè¯•åŠŸèƒ½ï¼Œä¸åº”ç”¨äºç”Ÿäº§ç¯å¢ƒ
- å‘è¡Œç‰ˆAPKå·²ä¼˜åŒ–æ€§èƒ½ï¼Œé€‚åˆæ­£å¼å‘å¸ƒä½¿ç”¨
- ç‰ˆæœ¬å·å¿…é¡»ä¸¥æ ¼é€’å¢ï¼Œç¡®ä¿æ›´æ–°æœºåˆ¶æ­£å¸¸å·¥ä½œ
- ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†å·¥å…·å¯ä»¥é¿å…ç‰ˆæœ¬å†²çªå’Œä¸ä¸€è‡´é—®é¢˜
