# mall-app-web

## 项目简介

`mall-app-web` 是一套电商系统的移动端项目，基于 `uni-app` 框架实现，支持微信小程序、H5、App 等多端部署。系统为用户提供便捷的移动购物体验，主要包括首页门户、商品浏览、购物车、订单管理、会员中心、积分商城、AI定制、签到等功能模块。

## 系统架构

### 整体架构图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           用户层                                         │
│              微信小程序 / H5 / App / 其他小程序                           │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         前端应用层                                       │
│                    uni-app + Vue + Vuex                                 │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │  首页    │ │  分类    │ │ AI定制  │ │  购物车  │ │  我的    │           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          API 网关层                                      │
│               mall-gateway (Spring Cloud Gateway)                       │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         后端微服务层                                     │
│  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐               │
│  │mall-portal│ │mall-search│ │ mall-auth │ │mall-admin │               │
│  └───────────┘ └───────────┘ └───────────┘ └───────────┘               │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 功能模块详解

### 模块总览

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        mall-app-web 功能模块                             │
├─────────────┬─────────────┬─────────────┬─────────────┬─────────────────┤
│   首页门户   │   商品功能   │   购物车    │   订单管理   │    会员中心     │
├─────────────┼─────────────┼─────────────┼─────────────┼─────────────────┤
│ • 轮播广告   │ • 商品搜索   │ • 商品列表   │ • 创建订单   │ • 个人信息      │
│ • 分类导航   │ • 商品分类   │ • 数量修改   │ • 订单支付   │ • 收货地址      │
│ • 推荐商品   │ • 商品详情   │ • 规格选择   │ • 订单列表   │ • 我的积分      │
│ • 活动专区   │ • 商品收藏   │ • 优惠券    │ • 物流跟踪   │ • 我的优惠券    │
│ • 签到入口   │ • 浏览历史   │ • 结算支付   │ • 售后申请   │ • 我的收藏      │
└─────────────┴─────────────┴─────────────┴─────────────┴─────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│                        特色功能模块                                      │
├─────────────┬─────────────┬─────────────┬─────────────┬─────────────────┤
│   AI定制    │   积分商城   │   签到系统   │   礼物功能   │    分销中心     │
├─────────────┼─────────────┼─────────────┼─────────────┼─────────────────┤
│ • 模板选择   │ • 商品兑换   │ • 每日签到   │ • 送礼列表   │ • 邀请好友      │
│ • 图片上传   │ • 优惠券兑换 │ • 连续签到   │ • 填写祝福   │ • 推广记录      │
│ • 效果预览   │ • 兑换记录   │ • 积分奖励   │ • 礼物确认   │ • 收益明细      │
│ • 定制下单   │ • 库存管理   │ • 签到日历   │ • 礼袋管理   │ • 团队管理      │
└─────────────┴─────────────┴─────────────┴─────────────┴─────────────────┘
```

---

### 1. 首页门户模块

#### 功能介绍

首页是系统的主要入口，展示热门商品、活动信息和分类导航，为用户提供便捷的购物入口。

| 子功能 | 功能说明 |
| --- | --- |
| 轮播广告 | 展示活动海报、促销信息 |
| 分类导航 | 快速进入商品分类页面 |
| 推荐商品 | 展示热门、新品、推荐商品 |
| 活动专区 | 秒杀、满减等活动入口 |
| 搜索入口 | 商品关键词搜索 |
| 签到入口 | 每日签到领积分 |

#### 业务流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          首页浏览流程                                    │
└─────────────────────────────────────────────────────────────────────────┘

                         ┌─────────────┐
                         │  打开应用    │
                         └──────┬──────┘
                                │
                                ▼
                         ┌─────────────┐
                         │  加载首页    │
                         └──────┬──────┘
                                │
        ┌───────────────────────┼───────────────────────┐
        ▼                       ▼                       ▼
  ┌─────────────┐        ┌─────────────┐        ┌─────────────┐
  │  轮播广告    │        │  分类导航    │        │  推荐商品    │
  └──────┬──────┘        └──────┬──────┘        └──────┬──────┘
         │                      │                      │
         ▼                      ▼                      ▼
  ┌─────────────┐        ┌─────────────┐        ┌─────────────┐
  │  活动详情    │        │  分类列表    │        │  商品详情    │
  └─────────────┘        └─────────────┘        └─────────────┘
```

---

### 2. 商品功能模块

#### 功能介绍

商品模块提供完整的商品浏览、搜索、详情展示功能，支持多规格选择和收藏。

| 子功能 | 功能说明 |
| --- | --- |
| 商品搜索 | 关键词搜索、历史记录、热门搜索 |
| 商品分类 | 多级分类浏览、分类筛选 |
| 商品列表 | 列表/网格展示、排序筛选 |
| 商品详情 | 图片轮播、规格选择、详情介绍 |
| 商品收藏 | 收藏/取消收藏、收藏列表 |
| 浏览历史 | 浏览记录、历史清空 |
| 组合商品 | 套餐商品、组合优惠 |

#### 业务流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          商品浏览流程                                    │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  搜索/分类   │ ──▶ │  商品列表    │ ──▶ │  商品详情    │ ──▶ │  规格选择    │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
                                                                   │
                    ┌──────────────────────────────────────────────┤
                    │                                              │
                    ▼                                              ▼
              ┌─────────────┐                              ┌─────────────┐
              │  加入购物车  │                              │  立即购买    │
              └─────────────┘                              └─────────────┘
```

#### 商品详情页功能

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          商品详情页                                      │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                      商品图片轮播                                 │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  商品名称：XXXX商品                                                      │
│  商品价格：¥99.00                          原价：¥199.00                 │
│  已售数量：1234                            库存：999                     │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  优惠信息：满100减20 | 新人专享券                                  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  规格选择：颜色 / 尺寸 / 数量                                      │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  商品详情：图文介绍                                               │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────────┐  ┌──────────────┐       │
│  │   客服    │  │   收藏    │  │  加入购物车   │  │   立即购买    │       │
│  └──────────┘  └──────────┘  └──────────────┘  └──────────────┘       │
└─────────────────────────────────────────────────────────────────────────┘
```

---

### 3. 购物车模块

#### 功能介绍

购物车模块管理用户选购的商品，支持数量修改、规格切换、优惠券使用等功能。

| 子功能 | 功能说明 |
| --- | --- |
| 商品列表 | 展示已加入购物车的商品 |
| 数量修改 | 增减商品数量 |
| 规格切换 | 修改商品规格 |
| 商品删除 | 移除购物车商品 |
| 全选操作 | 全选/取消全选 |
| 价格计算 | 自动计算总价和优惠 |
| 优惠券 | 选择可用优惠券 |

#### 业务流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          购物车业务流程                                  │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  商品详情    │ ──▶ │  加入购物车  │ ──▶ │  购物车列表  │ ──▶ │  选择商品    │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
                                                                   │
                    ┌──────────────────────────────────────────────┘
                    ▼
              ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
              │  选择优惠券  │ ──▶ │  确认金额    │ ──▶ │  去结算      │
              └─────────────┘     └─────────────┘     └─────────────┘
```

#### 购物车价格计算

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          价格计算逻辑                                    │
└─────────────────────────────────────────────────────────────────────────┘

  商品原价总计                    ¥ 500.00
       │
       ▼
  ┌─────────────┐
  │  会员折扣    │  -¥ 50.00 (会员9折)
  └─────────────┘
       │
       ▼
  ┌─────────────┐
  │  优惠券抵扣  │  -¥ 20.00 (满100减20)
  └─────────────┘
       │
       ▼
  ┌─────────────┐
  │  积分抵扣    │  -¥ 10.00 (1000积分)
  └─────────────┘
       │
       ▼
  实付金额                        ¥ 420.00
```

---

### 4. 订单管理模块

#### 功能介绍

订单模块处理用户的完整购物流程，从创建订单到售后服务。

| 子功能 | 功能说明 |
| --- | --- |
| 创建订单 | 确认商品、地址、支付方式 |
| 订单支付 | 微信支付、余额支付、积分抵扣 |
| 订单列表 | 按状态筛选、订单搜索 |
| 订单详情 | 商品信息、物流信息、订单状态 |
| 物流跟踪 | 实时物流信息查询 |
| 确认收货 | 确认收货、自动收货 |
| 售后申请 | 退货退款、换货申请 |
| 订单评价 | 商品评价、晒图评价 |

#### 业务流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          订单完整流程                                    │
└─────────────────────────────────────────────────────────────────────────┘

┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│ 购物车    │ ─▶│ 创建订单  │ ─▶│ 订单支付  │ ─▶│ 等待发货  │ ─▶│ 已发货   │
└──────────┘    └──────────┘    └──────────┘    └──────────┘    └──────────┘
                     │               │                              │
                     │ 取消          │ 超时                         │ 确认收货
                     ▼               ▼                              ▼
               ┌──────────┐    ┌──────────┐                   ┌──────────┐
               │ 已取消    │    │ 已关闭    │                   │ 已完成   │
               └──────────┘    └──────────┘                   └──────────┘
                                                                    │
                                                                    │ 申请售后
                                                                    ▼
                                                              ┌──────────┐
                                                              │ 售后处理  │
                                                              └──────────┘
```

#### 订单状态流转

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          订单状态说明                                    │
├─────────────┬───────────────────────────────────────────────────────────┤
│   状态码     │                      说明                                 │
├─────────────┼───────────────────────────────────────────────────────────┤
│   待付款     │  订单已创建，等待用户支付                                  │
│   待发货     │  支付成功，等待商家发货                                    │
│   已发货     │  商家已发货，等待用户收货                                  │
│   已完成     │  用户确认收货，订单完成                                    │
│   已取消     │  用户主动取消订单                                         │
│   已关闭     │  支付超时，系统自动关闭                                    │
│   售后中     │  用户申请售后，等待处理                                    │
└─────────────┴───────────────────────────────────────────────────────────┘
```

#### 支付流程

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  确认订单    │ ──▶ │  选择支付    │ ──▶ │  发起支付    │ ──▶ │  支付结果    │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
                          │
         ┌────────────────┼────────────────┐
         ▼                ▼                ▼
   ┌───────────┐   ┌───────────┐   ┌───────────┐
   │ 微信支付   │   │ 余额支付   │   │ 积分抵扣   │
   └───────────┘   └───────────┘   └───────────┘
```

---

### 5. 会员中心模块

#### 功能介绍

会员中心管理用户个人信息、收货地址、积分、优惠券等账户相关功能。

| 子功能 | 功能说明 |
| --- | --- |
| 个人信息 | 头像、昵称、手机号管理 |
| 收货地址 | 地址增删改、默认地址设置 |
| 我的积分 | 积分余额、积分明细、积分规则 |
| 我的优惠券 | 可用券、已用券、已过期 |
| 我的收藏 | 收藏商品列表、取消收藏 |
| 浏览历史 | 浏览记录、清空历史 |
| 账户余额 | 余额查询、充值、消费记录 |
| 我的订单 | 订单入口、各状态订单数量 |

#### 业务流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          会员中心结构                                    │
└─────────────────────────────────────────────────────────────────────────┘

                         ┌─────────────┐
                         │  会员中心    │
                         └──────┬──────┘
                                │
     ┌──────────┬───────────────┼───────────────┬──────────┐
     ▼          ▼               ▼               ▼          ▼
┌─────────┐┌─────────┐   ┌─────────────┐   ┌─────────┐┌─────────┐
│ 个人信息 ││ 我的订单 │   │  资产管理    │   │ 我的收藏 ││ 浏览历史 │
└─────────┘└─────────┘   └──────┬──────┘   └─────────┘└─────────┘
                                │
                 ┌──────────────┼──────────────┐
                 ▼              ▼              ▼
           ┌─────────┐   ┌─────────┐   ┌─────────┐
           │ 账户余额 │   │ 我的积分 │   │ 优惠券  │
           └─────────┘   └─────────┘   └─────────┘
```

#### 会员等级体系

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          会员等级体系                                    │
├─────────────┬─────────────┬─────────────┬─────────────┬─────────────────┤
│   普通会员   │   银卡会员   │   金卡会员   │   钻石会员   │    至尊会员     │
├─────────────┼─────────────┼─────────────┼─────────────┼─────────────────┤
│  消费0元    │  消费500元  │  消费2000元 │  消费5000元 │   消费10000元   │
│  无折扣     │   9.8折     │    9.5折    │    9折      │     8.5折       │
│  1倍积分    │  1.2倍积分  │   1.5倍积分  │   2倍积分   │    3倍积分      │
└─────────────┴─────────────┴─────────────┴─────────────┴─────────────────┘
```

---

### 6. AI定制模块

#### 功能介绍

AI定制模块提供个性化商品定制功能，用户可以上传图片或使用AI生成图案，定制专属商品。

| 子功能 | 功能说明 |
| --- | --- |
| 模板选择 | 选择定制商品模板 |
| 图片上传 | 上传自定义图片 |
| AI生成 | AI智能生成图案 |
| 效果预览 | 实时预览定制效果 |
| 定制下单 | 确认定制并下单 |
| 设计详情 | 查看已保存的设计 |

#### 业务流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          AI定制流程                                      │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  选择模板    │ ──▶ │  上传/生成   │ ──▶ │  调整设计    │ ──▶ │  效果预览    │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
                          │                                       │
         ┌────────────────┤                                       │
         ▼                ▼                                       ▼
   ┌───────────┐   ┌───────────┐                           ┌─────────────┐
   │ 上传图片   │   │ AI生成    │                           │  确认下单    │
   └───────────┘   └───────────┘                           └─────────────┘
```

---

### 7. 积分商城模块

#### 功能介绍

积分商城提供积分兑换功能，用户可以使用积分兑换商品或优惠券。

| 子功能 | 功能说明 |
| --- | --- |
| 商品兑换 | 积分+现金兑换商品 |
| 优惠券兑换 | 纯积分兑换优惠券 |
| 兑换记录 | 查看兑换历史 |
| 库存管理 | 实时库存检查 |
| 限购控制 | 个人兑换次数限制 |

#### 业务流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          积分兑换流程                                    │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  积分商城    │ ──▶ │  选择商品    │ ──▶ │  确认兑换    │ ──▶ │  兑换成功    │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
                          │                   │
         ┌────────────────┤                   │
         ▼                ▼                   ▼
   ┌───────────┐   ┌───────────┐       ┌───────────┐
   │ 商品兑换   │   │ 优惠券兑换 │       │ 扣减积分   │
   │ 积分+现金  │   │ 纯积分    │       │ 发放商品   │
   └───────────┘   └───────────┘       └───────────┘
```

---

### 8. 签到系统模块

#### 功能介绍

签到系统鼓励用户每日活跃，通过签到获取积分奖励。

| 子功能 | 功能说明 |
| --- | --- |
| 每日签到 | 点击签到领取积分 |
| 连续签到 | 连续签到额外奖励 |
| 签到日历 | 查看签到记录 |
| 积分奖励 | 签到积分发放 |
| 补签功能 | 补签历史签到 |

#### 业务流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          签到奖励规则                                    │
├─────────────┬─────────────┬─────────────┬─────────────┬─────────────────┤
│   第1天     │   第2天     │   第3天     │   第4-6天   │    第7天        │
├─────────────┼─────────────┼─────────────┼─────────────┼─────────────────┤
│   +5积分    │   +10积分   │   +15积分   │   +20积分   │    +50积分      │
│             │             │             │             │   (连续7天)     │
└─────────────┴─────────────┴─────────────┴─────────────┴─────────────────┘

签到流程：
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  进入签到    │ ──▶ │  点击签到    │ ──▶ │  积分发放    │ ──▶ │  签到成功    │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
```

---

### 9. 礼物功能模块

#### 功能介绍

礼物功能支持用户购买商品作为礼物送给好友。

| 子功能 | 功能说明 |
| --- | --- |
| 送礼列表 | 可送礼商品列表 |
| 填写祝福 | 添加祝福语 |
| 礼物确认 | 确认送礼信息 |
| 礼袋管理 | 管理收到的礼物 |
| 礼物领取 | 领取好友送的礼物 |

#### 业务流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          送礼流程                                        │
└─────────────────────────────────────────────────────────────────────────┘

送礼方：
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  选择商品    │ ──▶ │  填写祝福    │ ──▶ │  支付订单    │ ──▶ │  分享给好友  │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘

收礼方：
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  收到分享    │ ──▶ │  查看礼物    │ ──▶ │  填写地址    │ ──▶ │  领取成功    │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
```

---

### 10. 分销中心模块

#### 功能介绍

分销中心提供用户推广和佣金管理功能。

| 子功能 | 功能说明 |
| --- | --- |
| 邀请好友 | 生成邀请链接/海报 |
| 推广记录 | 查看邀请的用户 |
| 收益明细 | 佣金收益记录 |
| 团队管理 | 查看团队成员 |
| 提现申请 | 佣金提现 |

#### 业务流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          分销推广流程                                    │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  生成海报    │ ──▶ │  分享好友    │ ──▶ │  好友注册    │ ──▶ │  绑定关系    │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
                                                                   │
                    ┌──────────────────────────────────────────────┘
                    ▼
              ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
              │  好友下单    │ ──▶ │  佣金结算    │ ──▶ │  提现到账    │
              └─────────────┘     └─────────────┘     └─────────────┘
```

---

## 项目结构

### 组织结构

```lua
mall-app-web
├── api/                          -- API 接口定义
│   ├── address.js               -- 地址接口
│   ├── cart.js                  -- 购物车接口
│   ├── coupon.js                -- 优惠券接口
│   ├── diy.js                   -- DIY定制接口
│   ├── home.js                  -- 首页接口
│   ├── member.js                -- 会员接口
│   ├── order.js                 -- 订单接口
│   ├── point.js                 -- 积分接口
│   ├── product.js               -- 商品接口
│   └── signin.js                -- 签到接口
├── components/                   -- 通用组件
│   ├── common/                  -- 公共组件
│   ├── diy/                     -- DIY组件
│   ├── home/                    -- 首页组件
│   └── store/                   -- 门店组件
├── pages/                        -- 页面文件
│   ├── new_index/               -- 首页
│   ├── category/                -- 分类页
│   ├── product/                 -- 商品页
│   ├── cart/                    -- 购物车
│   ├── order/                   -- 订单页
│   ├── user/                    -- 会员中心
│   ├── point/                   -- 积分页
│   ├── signin/                  -- 签到页
│   ├── diy/                     -- AI定制
│   └── gift-bag/                -- 礼物页
├── subpackages/                  -- 分包页面
│   ├── diy/                     -- DIY分包
│   ├── sale/                    -- 销售分包
│   └── user/                    -- 用户分包
├── store/                        -- Vuex 状态管理
├── utils/                        -- 工具类
│   ├── appConfig.js             -- 应用配置
│   ├── requestUtil.js           -- 请求工具
│   └── updateManager.js         -- 版本更新
├── static/                       -- 静态资源
└── js_sdk/                       -- 第三方SDK
```

### 页面路由结构

```lua
pages/
├── new_index/index              -- 首页
├── category/category            -- 分类页
├── diy/diy                      -- AI定制入口
├── user/user                    -- 会员中心
├── cart/cart                    -- 购物车
├── product/
│   ├── product                  -- 商品详情
│   ├── bundleDetail             -- 组合商品详情
│   ├── list                     -- 商品列表
│   └── sales-ranking            -- 销量排行
├── order/
│   ├── order                    -- 订单列表
│   ├── createOrder              -- 创建订单
│   ├── orderDetail              -- 订单详情
│   ├── returnApply              -- 退货申请
│   └── afterSaleProgress        -- 售后进度
├── money/
│   ├── money                    -- 账户余额
│   ├── pay                      -- 支付页面
│   └── paySuccess               -- 支付成功
├── signin/signin                -- 签到页面
├── point/point                  -- 积分页面
└── gift-bag/
    ├── gift-bag                 -- 礼袋
    ├── giftsList                -- 送礼列表
    └── gift-wishes              -- 填写祝福
```

---

## 技术选型

### 前端技术

| 技术 | 说明 | 官网 |
| --- | --- | --- |
| Vue 2 | 核心前端框架 | https://vuejs.org/ |
| Vuex | 全局状态管理框架 | https://vuex.vuejs.org/ |
| uni-app | 跨平台前端框架 | https://uniapp.dcloud.io/ |
| luch-request | HTTP 请求框架 | https://github.com/lei-mu/luch-request |
| html2canvas | 海报生成工具 | https://html2canvas.hertzen.com/ |

### 支持平台

| 平台 | 说明 |
| --- | --- |
| 微信小程序 | 主要运行平台 |
| H5 | 移动端网页 |
| App | iOS/Android 应用 |
| 支付宝小程序 | 支付宝平台 |
| 百度小程序 | 百度平台 |
| 字节小程序 | 抖音/头条平台 |

---

## 环境搭建

### 开发环境

| 工具 | 版本号 | 下载 |
| --- | --- | --- |
| HBuilder X | 最新版 | https://www.dcloud.io/hbuilderx.html |
| Node.js | 12.x+ | https://nodejs.org/ |
| 微信开发者工具 | 最新版 | https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html |

### 搭建步骤

#### 1. 克隆项目

```bash
git clone <项目地址>
cd mall-app-web
```

#### 2. 安装依赖

```bash
npm install
```

#### 3. 配置后端接口

修改 `utils/appConfig.js` 文件中的 `API_BASE_URL`：

```javascript
// 本地后端接口
API_BASE_URL: 'http://localhost:8201/mall-portal'

// 或使用在线接口
API_BASE_URL: 'https://portal-api.macrozheng.com'
```

#### 4. 运行项目

使用 HBuilder X 打开项目：
- 运行到浏览器：`运行 -> 运行到浏览器 -> Chrome`
- 运行到小程序：`运行 -> 运行到小程序模拟器 -> 微信开发者工具`
- 运行到手机：`运行 -> 运行到手机或模拟器`

#### 5. 访问应用

- H5 访问地址：http://localhost:8060
- 小程序：在微信开发者工具中预览

---

## 运行命令

```bash
# 安装依赖
npm install

# H5 开发运行（使用 HBuilder X）
# 运行 -> 运行到浏览器 -> Chrome

# 小程序开发运行（使用 HBuilder X）
# 运行 -> 运行到小程序模拟器 -> 微信开发者工具

# H5 发行打包
# 发行 -> 网站-H5手机版

# 小程序发行打包
# 发行 -> 小程序-微信
```

---

## 核心业务流程总览

### 用户购物完整流程

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          用户购物完整流程                                 │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  浏览首页    │ ──▶ │  搜索商品    │ ──▶ │  查看详情    │ ──▶ │  加入购物车  │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
                                                                   │
┌──────────────────────────────────────────────────────────────────┘
│
▼
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  去结算      │ ──▶ │  选择地址    │ ──▶ │  选择优惠    │ ──▶ │  确认支付    │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
                                                                   │
┌──────────────────────────────────────────────────────────────────┘
│
▼
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  等待发货    │ ──▶ │  物流跟踪    │ ──▶ │  确认收货    │ ──▶ │  评价订单    │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
```

### 会员积分流转

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          积分获取与使用                                  │
└─────────────────────────────────────────────────────────────────────────┘

积分获取：
┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐
│  购物消费    │  │  每日签到    │  │  邀请好友    │  │  活动奖励    │
│  1元=1积分  │  │  5-50积分   │  │  邀请奖励    │  │  参与活动    │
└──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘
       │                │                │                │
       └────────────────┴────────────────┴────────────────┘
                                │
                                ▼
                         ┌─────────────┐
                         │  积分账户    │
                         └──────┬──────┘
                                │
       ┌────────────────────────┼────────────────────────┐
       ▼                        ▼                        ▼
┌─────────────┐          ┌─────────────┐          ┌─────────────┐
│  积分抵扣    │          │  积分兑换    │          │  积分过期    │
│  下单抵现    │          │  兑换商品    │          │  年度清零    │
└─────────────┘          └─────────────┘          └─────────────┘
```

---

## 版本更新功能

### 功能特点

- 自动检测：应用启动时自动检测新版本
- 智能下载：后台静默下载更新包
- 用户友好：提供清晰的更新提示
- 断点续传：支持网络中断后继续下载
- 重试机制：下载失败时提供重试选项
- 定时提醒：用户选择稍后更新时定时提醒

### 使用方法

```javascript
import updateManager from '@/utils/updateManager.js';

// 检查更新
updateManager.checkForUpdate();

// 手动检查更新
updateManager.manualCheckUpdate();

// 检查更新提醒
updateManager.checkUpdateReminder();
```

---

## 相关文档

### 功能文档

- [需求说明文档](./需求说明文档.md)
- [邀请功能说明](./邀请功能说明.md)
- [签到积分兑换页面合并总结](./签到积分兑换页面合并总结.md)
- [小程序售后商品选择优化](./小程序售后商品选择优化.md)

### 技术文档

- [性能优化总结](./docs/性能优化总结.md)
- [优化测试指南](./docs/优化测试指南.md)
- [DIY和分享功能优化总结](./docs/DIY和分享功能优化总结.md)
- [邀请业务完整实现](./docs/invite-business-complete-implementation.md)

### 部署文档

- [部署检查清单](./docs/deployment-checklist.md)

---

## 许可证

[Apache License 2.0](./LICENSE)

---

如有问题或建议，请联系开发团队。
